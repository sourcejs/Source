<!DOCTYPE html>
<!--[if IE 7]>         <html class="ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if IE 9]>         <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html> <!--<![endif]-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=10">
    <title>Basic Engine Documentation</title>

    <meta name="author" content="Robert Haritonov">

    <!-- Your project styles -->
        <!--<link href="/data/docs/project.css" rel="stylesheet">-->
    <!-- /Your project styles -->

    <!-- Source default resources -->
        <link href="/core/css/core.css" rel="stylesheet">

        <!--[if lt IE 9]><script src="/core/js/lib/html5shiv.js"></script><![endif]-->
        <script data-main="/core/js/source" src="/core/js/lib/require-jquery.js"></script>
    <!-- /Source default resources -->
</head>
<body>

    <div class="source_container"><div class="source_main source_col-main" role="main">

        <h1>Basic Engine Documentation</h1>

        <div class="source_info">
	        <p>This page (and the rest of the site) is powered by the Source engine. All documentation comes built in in every Source instance.</p>

            <p>The <a href="http://sourcejs.com">Sourcejs.com</a> client side source code is stored in our <a href="https://github.com/sourcejs/Sourcejs.com">github repo</a>.</p>
        </div>

        <section class="source_section">
            <h2>Quick Start</h2>

	        <p>To get started, follow these simple steps:</p>

	        <code class="brush : html source_visible">
                $ git clone https://github.com/sourcejs/Source.git
                $ cd Source

                $ npm install
                $ grunt init
                $ sudo node app.js
            </code>

            <p>Make sure that you have <a href="http://help.github.com/articles/set-up-git">Git</a>, <a href="http://nodejs.org/">Node.js</a>, and <a href="http://gruntjs.com/getting-started">Grunt</a> installed before getting started. You can read more about Grunt task workflows with Source <a href="/docs/grunt">here</a>.</p>

            <p>After initializing your new project with Grunt, Source will create a folder named <span class="source_hl">/public</span> as the root path for your Node.js server on port 80.</p>

            <p>Your new <span class="source_hl">/public</span> folder is the primary folder for writing <strong>specs</strong> for your projects. Source '.gitignore's this folder so that you may create your own repository inside it. We manage <a href="http://sourcejs.com">Sourcejs.com</a> in this way - visit <a href="https://github.com/sourcejs/Sourcejs.com">our spec's repo</a> to see this site's source. All client-side code of the Source engine is copied to the <span class="source_hl">/public</span> folder through Grunt update tasks.</p>

	        <h3>Starting Template</h3>

	        <p>The starting template for new <strong>spec</strong> pages can be found in <a href="/docs/starting">/docs/starting</a> in your <span class="source_hl">/public</span> folder. Copy the contents to a new folder and you'll be ready to write a new spec.</p>

            <a href="/docs/spec" class="source_a_hl">Read more about <strong>Spec</strong> pages here.</a>
        </section>

        <section class="source_section">
            <h2>File Structure</h2>

	        <p>The main engine architecture is based on <strong>two enviroments:</strong></p>

          <ul>
            <li><strong>client side</strong> - frontend</li>
            <li><strong>server side</strong> - node</li>
          </ul>

          <p>Each environment has its own modules and plugins.</p>

            <code class="brush : js source_visible">
                // Client side (frontend) part
                client
                    init
                    src
                    plugins (.gitignored)

                // Server root folder for specs (.gitignored)
                public
                    core
                    user

                // Server (node) part
                init
                core
                user (.gitignored)
            </code>

            <p>This structure allows you to override <strong>core</strong> settings (found in '.gitignored' folders) for your specs, and to extend features of Source in both enviroments. You can easily manage the Source engine and your spec repository all in one place.</p>

            <p><strong>If you are not extending core functionality, the <span class="source_hl">/user</span> and <span class="source_hl">/public/user</span> folders have everything you need for your custom settings on client and server side.</strong></p>

            <h3>Node</h3>

            <code class="brush : js source_visible">
                // Server (node) part
                init
                core
                    options
                    routes
                    views

                user (.gitignored)
                    options
                    routes
                    plugins

                    app.js
                    package.json //For your custom dependencies

                app.js
            </code>

            <p><span class="source_hl">/core </span> and <span class="source_hl">/user</span> have a common file structure. Options set in <span class="source_hl">/user/options</span> will override options from <span class="source_hl">/core/options</span>. The same applies to the <span class="source_hl">/routes</span> folders.</p>

            <p><span class="source_hl">/app.js</span> is the main server script, and can be extented through <span class="source_hl">/user/app.js</span></p>

            <p>Because the <span class="source_hl">/user</span> folder is '.gitignore'd, you could add any additional project requirements there, such as a <span class="source_hl">package.json</span>, for additional plugins and dependencies.</p>

            <h3>Client</h3>

            <code class="brush : js source_visible">
                // Client side (frontend) part
                client
                    init
                    src
                        core
                        docs
                        test

                    plugins (.gitignored)

                // Server root folder for spect (.gitignored)
                public

                    //Files from /client/src (.gitignored)
                    core //minified
                    docs
                    test
                    plugins //minified

                    data //for your custom data and resources
                    user
            </code>

            <p><span class="source_hl">/client/src</span> - has all the client side code of Source engine, all files from this folder are minified and copied to <span class="source_hl">/public</span> folder on "grunt init" (first setup) and "grunt update".</p>

	        <p>For overriding <strong>core</strong> settings same logic as on server side is available, for example, to override header/footer templates and change options use <span class="source_hl">/user</span> folder.</p>

	        <p>Folder <span class="source_hl">/data</span> is for user content like your images or your project styles etc.</p>
        </section>

        <section class="source_section">
            <h2>Options</h2>

            <h3>Node</h3>

            <p>Options of Source server side are stored in <span class="source_hl">/user/options/options.json</span> (appears after initializing project), all options there overrides default core options <span class="source_hl">/core/options/options.js</span>.</p>

            <code class="brush : js source_visible">
                {
                    "common": {
                        "pathToSpecs": "public"
                    },

                    "grunt" : {
                        "server": {
                            "pathToDir": "/path/to/project/dir/on/server",
                            "host": "your.host.here",
                            "port": "yourPortHere",
                            "key": "keyInFile.ftppass"
                        }
                    }
                }
            </code>

            <p><strong>common.pathToSpecs</strong> object is setting the path to specs folder, so if you want to override it, just change the setting in <strong>/user</strong> folder.</p>

            <p>In the same options file we store all options for Grunt deploy tasks and many more settings to come.</p>

            <h3>Client</h3>

            <p>Client side options works with same logic as server side options, overriding core options from <span class="source_hl">/public/user/js/options.js</span>.</p>

            <code class="brush : js source_visible">
                {
                    sourceOptions : {
                        modulesEnabled : {},

                        modulesOptions : {},

                        // Plugins
                        pluginsEnabled : {},

                        pluginsOptions : {}
                    },

                    // Default options for landing page
                    landingOptionsExceptions : {
                        pluginsEnabled : {}
                    }
                }
            </code>

            <p>This is options object from <span class="source_hl">/public/user/js/options.js</span> (see sources for more examples), here we have next fields:</p>

            <ul>
                <li><strong>modulesEnabled</strong> - settings for enabling or disabling core modules</li>
                <li><strong>modulesOptions</strong> - core modules options</li>
                <li><strong>pluginsEnabled</strong> - the same as modules, but for custom plugins in "/public/plugins"</li>
                <li><strong>landingOptionsExceptions</strong> - lets us disable some modules from the navigation pages of Source engine</li>
            </ul>

            <p>All client side options could be overridden from any page, using this approach:</p>

            <code class="brush : html source_visible">
                <script>
                    define('modules/inlineOptions', {
                        modulesOptions : {
                            globalNav : {
                                pageLimit: 6
                            }
                        }
                    })
                </script>
            </code>

        </section>

        <section class="source_section">
            <h2>Plugins</h2>

            <h3>Node</h3>

            <p>You could install any plugins for the server side through <strong>npm</strong> right in <span class="source_hl">/user</span> folder with custom <strong>package.json</strong> and require them in <span class="source_hl">/user/app.js</span>.</p>

            <h3>Client</h3>

            <p>All client plugins need to be stored in <span class="source_hl">/client/plugins</span>, plugins will be copied to <span class="source_hl">/public</span> folder with grunt tasks. We recommend to use <a href="http://volojs.org">Volo</a> packet manager, and with "volo find Sourcejs" you will find all our official plugins from <a href="https://github.com/sourcejs">GitHub</a>.</p>

	        <p>To activate plugins use <span class="source_hl">/public/user/js/options.js</span>, there you will find "pluginsEnabled" object where name of the parameter must be the same as plugin name (and plugin folder name as well) and value set to "true".</p>

	        <code class="brush : js source_visible">
		        pluginsEnabled : {
			        //Plugins enabling
			        //bubble: true,
			        //debugmode: true
		        }
	        </code>

        </section>

        <section class="source_section">
            <h2>Contact us</h2>

	        <p>Leave your questions and feedback at <a href="https://github.com/sourcejs/Source/issues">Issues</a> sections on Github.</p>

        </section>

        <!--TODO: Documentation about require and writing own modules-->

    </div></div>

</body>
</html>
